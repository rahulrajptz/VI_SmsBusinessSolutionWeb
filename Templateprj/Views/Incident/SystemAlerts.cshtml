@{
    ViewBag.ActLink = ViewBag.Title = "SystemAlerts";
    System.Data.DataTable systemalert = ViewBag.Data;
}
<link href="~/Content/ionicons.min.css" rel="stylesheet" />
@if (Session["RoleID"].ToString() == "1")
{
    <div class="row">
        <div class="col s12">
            <div class="card animated slideInDown">
                <div class="card-header">
                    <h4 class="card-title">SystemAlerts</h4>
                </div>
                <div class="card-body">
                    @if (systemalert != null && systemalert.Rows.Count != 0)
                {
                        <div id="div_Report" class="dataTables_wrapper container-fluid dt-bootstrap4">
                            <div class="col-sm-12">
                                <table id="resolved" class="table table-striped table-bordered dataTable dtr-inline" cellspacing="0" width="100%" role="grid" aria-describedby="datatable_info" style="width: 100%;">
                                    <thead>
                                        <tr>
                                            @foreach (System.Data.DataColumn column in systemalert.Columns)
                                            {
                                                if (@column.ColumnName != "ID")
                                                {
                                                    <th>@column.ColumnName</th>
                                                }
                                            }
                                            <th>Inc</th>
                                            <th>Qrc</th>
                                            <th>Remove</th>
                                        </tr>

                                    </thead>
                                    <tbody>
                                        @foreach (System.Data.DataRow row in systemalert.Rows)
                                        {
                                            string UrlwithIdI = "0";
                                            string UrlwithIdQ = "0";
                                            string UrlwithIdF = "0";
                                            <tr>
                                                @for (int i = 0; i < ViewBag.Data.Columns.Count; i++)
                                                {
                                                    UrlwithIdI = "Incidents?id=" + row["ID"].ToString() + ",F,T";
                                                    UrlwithIdQ = "Qrc?id=" + row["ID"].ToString() + ",F,T";
                                                    UrlwithIdF = "SystemAlerts?id=" + row["ID"].ToString();
                                                    if (i > 0)
                                                    {
                                                        <td>@row[i].ToString()</td>
                                                    }

                                                }
                                                    <td><a href=@UrlwithIdI class="btn btn-success btn-round btn-icon">Inc</a></td>
                                                    <td><a href=@UrlwithIdQ class="btn btn-warning btn-round btn-icon">Qrc</a></td>
                                                    <td>
                                                        <a id="toastr-success" href=@UrlwithIdF class="btn btn-danger btn-round btn-icon">
                                                            <i class="ion-android-delete" style="font-size:24px;"></i>
                                                        </a>
                                                    </td>
</tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
}
<script src="~/assets/js/core/jquery.min.js"></script>
@section scripts {
    <script>
    $(document).ready(function ()
    {
        demo.initNowUiWizard();
        $('#resolved').DataTable();
        $('#example').DataTable();

        if ('@ViewBag.Status' == "1") {
            toastr.options = {
                "closeButton": false,
                "debug": false,
                "newestOnTop": false,
                "progressBar": true,
                "positionClass": "toast-bottom-full-width",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            };
            if ('@ViewBag.Success' != "")
             toastr.success('Succesfully deleted..');
         else toastr.error('Some error occured while deleting');
    }
    });
    </script>
}
