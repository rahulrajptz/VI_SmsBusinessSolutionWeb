function SessionExpireAlert(n,t,i){timeout=n;popupTime=n-t;url=i;ResetSession()}function ResetSession(){closing=!0;clearInterval(tickticktimer);clearTimeout(popupTimer);clearTimeout(sessionTimer);ignoreAjaxSM=!0;$.ajax({url:url+"?"+escape(new Date),type:"GET",async:!1}).fail(function(){closing=!1;window.location.reload()});StartTimer()}function NoMoreSession(){closing=!0}function StartTimer(){var n=(timeout-popupTime)/1e3;popupTimer=setTimeout(function(){material.advConfirm({title:"Session Expiring..",message:"Your Session will expire in&nbsp;<span id='seconds'><\/span>&nbsp;seconds.<br />Do you want to reset?",confirmText:"Reset Session",confirmWave:"teal",cancelText:"CANCEL",cancelWave:"grey",callBack:function(n){n?ResetSession():NoMoreSession()}});tickticktimer=setInterval(function(){n--;n>=0&&(document.getElementById("seconds").innerHTML=n)},1e3)},popupTime);sessionTimer=setTimeout(function(){closing=!1;window.location=url.replace("KeepALive","Login")},timeout)}function changeHashOnLoad(){window.location.href+="#";setTimeout("changeHashAgain()","50")}function changeHashAgain(){window.location.href+="1"}function restoreHash(){window.location.hash!=storedHash&&(window.location.hash=storedHash)}var popupTimer,sessionTimer,tickticktimer,timeout,popupTime,url,ignoreAjaxSM=!1,closing=!0,myEvent=window.attachEvent||window.addEventListener,chkevent=window.attachEvent?"onbeforeunload":"beforeunload",storedHash;myEvent(chkevent,function(n){if(closing){var t="Sure?";return(n||window.event).returnValue=t,t}});$(function(){$(document).ajaxStart(function(){ignoreAjaxSM!=!0&&ResetSession();ignoreAjaxSM=!1});$(".not-close").click(function(){closing=!1});$(window).unload(function(){closing&&$.ajax({url:url.replace("KeepALive","AbandonSession"),type:"GET",async:!1})})});storedHash=window.location.hash;window.addEventListener?window.addEventListener("hashchange",function(){restoreHash()},!1):window.attachEvent&&window.attachEvent("onhashchange",function(){restoreHash()});$(window).load(function(){changeHashOnLoad();navigator.cookieEnabled||alert("Please Enable Cookie")});
//# sourceMappingURL=SessionMonitor.min.js.map
